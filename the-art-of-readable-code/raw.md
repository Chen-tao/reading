编写可读代码的艺术【美】Dustin Boswell 【美】Trevor Foucher
第1章　代码应当易于理解
2014-12-23
关键思想
代码应当易于理解
可读性基本定理
2014-12-23
关键思想
代码的写法应当使别人理解它所需的时间最小化。
总是越小越好吗
2014-12-23
尽管减少代码行数是一个好目标，但把理解代码所需的时间最小化是一个更好的目标。
第2章　把信息装到名字里
2014-12-23
关键思想
把信息装入名字中。
选择专业的词
2014-12-23
要选择非常专业的词，并且避免使用“空洞”的词
2014-12-23
找到更有表现力的词
注同义词有很多，尽量找到最精确的描述
2014-12-23
关键思想
2014-12-23
清晰和精确比装可爱好。
避免像tmp和retval这样泛泛的名字
2014-12-23
避免像tmp和retval这样泛泛的名字
注名字要尽量表明实体或行为，不要使用泛泛的空洞的名字
2014-12-23
循环迭代器
注迭代器在表明迭代功能的同时，也应当表明迭代的实体
2014-12-23
如果你要使用像tmp、it或者retval这样空泛的名字，那么你要有个好的理由。
用具体的名字代替抽象的名字
2014-12-23
在给变量、函数或者其他元素命名时，要把它描述得更具体而不是更抽象。
为名字附带更多信息
2014-12-23
如果关于一个变量有什么重要事情的读者必须知道，那么是值得把额外的“词”添加到名字中的
2014-12-23
如果你的变量是一个度量的话（如时间长度或者字节数），那么最好把名字带上它的单位。
2014-12-23
附带其他重要属性
注若存在不确定性，比如有多种状态或形式，就应该将信息包含在名称中，对状态或形式做区分
名字应该有多长
2014-12-23
，有一个隐含的约束是名字不能太长。
2014-12-23
名字越长越难记，在屏幕上占的地方也越大，可能会产生更多的换行。
2014-12-23
在小的作用域里可以使用短的名字
2014-12-23
所有的信息（变量的类型、它的初值、如何析构等）都很容易看到，所以可以用很短的名字。
2014-12-23
因此如果一个标识符有较大的作用域，那么它的名字就要包含足够的信息以便含义更清楚。
2014-12-23
首字母缩略词和缩写
2014-12-23
经验原则是：团队的新成员是否能理解这个名字的含义？如果能，那可能就没有问题。
2014-12-23
丢掉没用的词
利用名字的格式来传递含义
2014-12-23
利用名字的格式来传递含义
对于下划线、连字符和大小写的使用方式也可以把更多信息装到名字中
2014-12-23
其他格式规范
注通过业内或团队内部定义一些规范来表明意义，比如类名首字母大写，jquery对象以$开头
总结
2014-12-23
使用专业的单词
2014-12-23
避免空泛的名字
2014-12-23
使用具体的名字来更细致地描述事物
2014-12-23
给变量名带上重要的细节
2014-12-23
为作用域大的名字采用更长的名字
2014-12-23
有目的地使用大小写、下划线等
第3章　不会误解的名字
2014-12-23
关键思想
要多问自己几遍：“这个名字会被别人解读成其他的含义吗？”要仔细审视这个名字。
例子：Filter()
2014-12-23
“filter”是个二义性单词。我们不清楚它的含义到底是“挑出”还是“减掉”
注注意名称的二义性，避免对行为产生误解
例子：Clip(text, length)
2014-12-23
推荐用min和max来表示（包含）极限
注防止出现大小差一问题，避免混淆大于和大于等于
推荐用first和last来表示包含的范围
2014-12-23
用first和last来表示包含的范围
推荐用begin和end来表示包含/排除范围
2014-12-23
用begin和end来表示包含/排除范围
给布尔值命名
2014-12-23
当为布尔变量或者返回布尔值的函数选择名字时，要确保返回true和false的意义很明确。
2014-12-23
通常来讲，加上像is、has、can或should这样的词，可以把布尔值变得更明确。
2014-12-23
最好避免使用反义名字
与使用者的期望相匹配
2014-12-23
与使用者的期望相匹配
注注意业内的一些常用命名规则，这些命名通常已形成习惯，尽量不要违背这些习惯
重新安排换行来保持一致和紧凑
2014-12-24
重新安排换行来保持一致和紧凑
用方法来整理不规则的东西
2014-12-24
用方法来整理不规则的东西
注对于一些一致性的行为，可以通过创建函数来整理，使得布局更整齐一致
在需要时使用列对齐
2014-12-24
在需要时使用列对齐
整齐的边和列让读者可轻松地浏览文本。
2014-12-24
有时你可以借用“列对齐”的方法来让代码易读
2014-12-24
列的边提供了“可见的栏杆”，阅读起来很方便。这是个“让相似的代码看起来相似”的好例子。
2014-12-24
，建立和维护对齐的工作量很大。另一个原因是，在改动时它造成了更多的“不同”，对一行的改动可能会导致另外5行也要改动（大部分只是空白）。
选一个有意义的顺序，始终一致地使用它
2014-12-24
选一个有意义的顺序，始终一致地使用它
在很多情况下，代码的顺序不会影响其正确性
2014-12-24
在这种情况下，不要随机地排序，把它们按有意义的方式排列会有帮助
把声明按块组织起来
2014-12-24
把声明按块组织起来
2014-12-24
大脑很自然地会按照分组和层次结构来思考，因此你可以通过这样的组织方式来帮助读者快速地理解你的代码。
把代码分成“段落”
2014-12-24
书面文字要分成段落是由于以下几个原因：
它是一种把相似的想法放在一起并与其他想法分开的方法。它提供了可见的“脚印”，如果没有它，会很容易找不到你读到哪里了。
它便于段落之间的导航。
2014-12-24
因为同样的原因，代码也应当分成“段落”
2014-12-24
给每个段落加了一条总结性的注释，这也会帮助读者浏览代码
个人风格与一致性
2014-12-24
关键思想
一致的风格比“正确”的风格更重要。
第5章　该写什么样的注释
2014-12-24
关键思想
2014-12-24
注释的目的是尽量帮助读者了解得和作者一样多。
什么不需要注释
2014-12-24
关键思想
不要为那些从代码本身就能快速推断的事实写注释。
2014-12-24
不要为了注释而注释
2014-12-24
不要给不好的名字加注释——应该把名字改好
2014-12-24
一个好的名字比一个好的注释更重要，因为在任何用到这个函数的地方都能看得到它。
2014-12-24
好代码>坏代码+好注释。
记录你的思想
2014-12-24
很多好的注释仅通过“记录你的想法”就能得到，也就是那些你在写代码时有过的重要想法。
2014-12-24
应该在代码中也加入注释来记录你对代码有价值的见解。
2014-12-24
为代码中的瑕疵写注释
注将代码中的问题通过注释记录下来，并把改动的建议也写在注释中，能给后人宝贵的意见
2014-12-24
标记
通常的意义TODO：
我还没有处理的事情FIXME：
已知的无法运行的代码HACK：
对一个问题不得不采用的比较粗糙的解决方案XXX：
危险！这里有重要的问题
2014-12-24
给常量加注释
注常量，如果名字不足以说明常量的由来，就应当添加注释标明由来
站在读者的角度
2014-12-24
意料之中的提问
注在读者会产生困惑的地方加上注释
2014-12-24
公布可能的陷阱
注告知代码在哪些情况下会产生问题
2014-12-24
“全局观”注释
注一些全局层面的注释能够帮助读者快速理解代码的功能，非常有帮助
2014-12-24
总结性注释
注对代码 做什么 怎么做 为什么 做总结
最后的思考——克服“作者心理阻滞”
2014-12-24
最后的思考——克服“作者心理阻滞”
2014-12-24
写注释这件事拆成了几个简单的步骤：
1. 不管你心里想什么，先把它写下来。2. 读一下这段注释，看看有没有什么地方可以改进。
3. 不断改进。
第6章　写出言简意赅的注释
2014-12-24
关键思想
注释应当有很高的信息/空间率。
让注释保持紧凑
2014-12-24
让注释保持紧凑
避免使用不明确的代词
2014-12-24
避免使用不明确的代词
注注释中的各个成员应当清晰明确，防止出现误解
润色粗糙的句子
2014-12-24
润色粗糙的句子
2014-12-24
在很多情况下，让注释更精确的过程总是伴随着让注释更紧凑。
精确地描述函数的行为
2014-12-24
精确地描述函数的行为
用输入/输出例子来说明特别的情况
2014-12-24
用输入/输出例子来说明特别的情况
2014-12-24
对于注释来讲，一个精心挑选的输入/输出例子比千言万语还有效。
声明代码的意图
2014-12-24
声明代码的意图
2014-12-24
从更高的层次解释了这段程序在做什么。这更符合程序员写这段代码时的想法。
“具名函数参数”的注释
2014-12-24
“具名函数参数”的注释
注参数为常数时应当给出注释进行说明
采用信息含量高的词
2014-12-24
采用信息含量高的词
2014-12-24
通常会有专门的词或短语来描述这种模式/定式。使用这些词会让你的注释更加紧凑。
第7章　把控制流变得易读
2014-12-25
关键思想
把条件、循环以及其他对控制流的改变做得越“自然”越好。运用一种方式使读者不用停下来重读你的代码。
条件语句中参数的顺序
2014-12-25
比较的左侧
比较的右侧“被问询的”表达式，它的值更倾向于不断变化
用来做比较的表达式，它的值更倾向于常量
if/else语句块的顺序
2014-12-25
首先处理正逻辑而不是负逻辑的情况。
2014-12-25
先处理掉简单的情况。
2014-12-25
先处理有趣的或者是可疑的情况。
?:条件表达式（又名“三目运算符”）
2014-12-25
关键思想
相对于追求最小化代码行数，一个更好的度量方法是最小化人们理解它所需的时间。
2014-12-25
建议
默认情况下都用if/else。三目运算符?:只有在最简单的情况下使用。
避免do/while循环
2014-12-25
避免do/while循环
2014-12-25
while循环相对更易读，因为你会先读到所有迭代的条件，然后再读到其中的代码块
2014-12-25
其中的continue语句会很让人迷惑
臭名昭著的goto
2014-12-25
臭名昭著的goto
注尽量使用向后goto，同事保证路径没有交叉
最小化嵌套
2014-12-25
最小化嵌套
嵌套很深的代码很难以理解。
2014-12-25
关键思想
当你对代码做改动时，从全新的角度审视它，把它作为一个整体来看待。
2014-12-25
通过提早返回来减少嵌套
2014-12-25
减少循环内的嵌套
第8章　拆分超长的表达式
2014-12-26
关键思想
把你的超长表达式拆分成更容易理解的小块。
用做解释的变量
2014-12-26
用做解释的变量
2014-12-26
拆分表达式最简单的方法就是引入一个额外的变量，让它来表示一个小一点的子表达式。
总结变量
2014-12-26
总结变量
2014-12-26
用一个短很多的名字来代替一大块代码，这个名字会更容易管理和思考。
使用德摩根定理
2014-12-26
德摩根定理
2014-12-26
对于一个布尔表达式
2014-12-26
“分别取反，转换与/或”
滥用短路逻辑
2014-12-26
滥用短路逻辑
2014-12-26
关键思想
要小心“智能”的小代码段——它们往往在以后会让别人读起来感到困惑
拆分巨大的语句
2014-12-26
同样的技术也可以用来拆分大的语句。
第9章　变量与可读性
2014-12-26
1. 变量越多，就越难全部跟踪它们的动向。
2014-12-26
2. 变量的作用域越大，就需要跟踪它的动向越久。
3. 变量改变得越频繁，就越难以跟踪它的当前值。
减少变量
2014-12-26
没有价值的临时变量
2014-12-26
没有拆分任何复杂的表达式。
2014-12-26
没有做更多的澄清
2014-12-26
没有压缩任何冗余代码。
2014-12-26
减少中间结果
2014-12-26
减少控制流变量
缩小变量的作用域
2014-12-26
缩小变量的作用域
2014-12-26
关键思想
让你的变量对尽量少的代码行可见。
2014-12-26
这样有效地减少了读者同时需要考虑的变量个数
2014-12-26
“尽量使方法变成静态的”。静态方法是让读者知道“这几行代码与那些变量无关”的好办法。
只写一次的变量更好
2014-12-26
只写一次的变量更好。
“永久固定”的变量更容易思考。
2014-12-26
关键思想
操作一个变量的地方越多，越难确定它的当前值。
第10章　抽取不相关的子问题
2014-12-26
积极地发现并抽取出不相关的子逻辑
2014-12-26
1. 看看某个函数或代码块，问问你自己：这段代码高层次的目标是什么？
2. 对于每一行代码，问一下：它是直接为了目标而工作吗？这段代码高层次的目标是什么呢？3. 如果足够的行数在解决不相关的子问题，抽取代码到独立的函数中。
纯工具代码
2014-12-26
纯工具代码
注将一些纯工具类的代码提取，方便以后重用
其他多用途代码
2014-12-26
其他多用途代码
注将一些特定逻辑的代码抽取，能够让代码逻辑更加清晰，更加容易维护，修改和测试也更加简单
创建大量通用代码
2014-12-26
通用代码很好，因为“它完全地从项目的其他部分中解耦出来”。像这样的代码容易开发，容易测试，并且容易理解。
项目专有的功能
2014-12-26
项目专有的功能
注对于项目的一些孤立的逻辑，也应当抽取出来
简化已有接口
2014-12-26
永远都不要安于使用不理想的接口”。你总是可以创建你自己的包装函数来隐藏接口的粗陋细节，让它不再成为你的阻碍。
过犹不及
2014-12-26
为代码增加一个函数存在一个小的（却有形的）可读性代价
2014-12-26
。如果你项目的其他部分也需要这些小函数，那么增加它们是有道理的
第11章　一次只做一件事
2014-12-26
关键思想
应该把代码组织得一次只做一件事情。
2014-12-26
1. 列出代码所做的所有“任务”
2014-12-26
. 尽量把这件任务拆分到不同的函数中，或者至少是代码中不同的段落中。
第12章　把想法变成代码
2014-12-26
当把一件复杂的事向别人解释时，那些小细节很容易就会让他们迷惑。把一个想法用“自然语言”解释是个很有价值的能力，因为这样其他知识没有你这么渊博的人才可以理解它。这需要把一个想法精炼成最重要的概念。
2014-12-26
用一个简单的过程来使你编写更清晰的代码：
1. 像对着一个同事一样用自然语言描述代码要做什么。2. 注意描述中所用的关键词和短语。
3. 写出与描述所匹配的代码。
2014-12-26
用一个简单的过程来使你编写更清晰的
第13章　少写代码
2014-12-26
所写的每一行代码都是要测试和维护
2014-12-26
关键思想
最好读的代码就是没有代码。
保持小代码库
2014-12-26
让你的代码库越小，越轻量级越好
2014-12-26
那么你就要：
创建越多越好的“工具”代码来减少重复代码
2014-12-26
减少无用代码或没有用的功能
2014-12-26
让你的项目保持分开的子项目状态。
2014-12-26
总的来说，要小心代码的“重量”。让它保持又轻又灵
熟悉你周边的库
2014-12-26
一条比较中肯的建议：每隔一段时间，花15分钟来阅读标准库中的所有函数/模块/类型的名字
使测试易于阅读和维护
2014-12-26
关键思想
测试应当具有可读性，以便其他程序员可以舒服地改变或者增加测试。
使这个测试更可读
2014-12-26
普遍的测试原则
2014-12-26
对使用者隐去不重要的细节，以便更重要的细节会更突出
让错误消息具有可读性
2014-12-26
让错误消息具有可读性
选择好的测试输入
2014-12-26
关键思想
基本原则是，你应当选择一组最简单的输入，它能完整地使用被测代码。
2014-12-26
关键思想
又简单又能完成工作的测试值更好。
为测试函数命名
2014-12-26
应当用这个名字来描述这个测试的细节
2014-12-26
搞明白这些
2014-12-26
被测试的类
2014-12-26
被测试的函数
2014-12-26
被测试的情形或bug
对测试较好的开发方式
2014-12-26
对于测试来讲理想的代码要有明确定义的接口，没有过多的状态或者其他的“设置”，并且没有很多需要审查的隐藏数据。
多看笔记 来自多看阅读 for Android
duokanbookid:1dac6438b3a34be2a56b3b21d47ae514
